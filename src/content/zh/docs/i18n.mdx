import { FileTree } from 'nextra/components'

# å›½é™…åŒ–æ”¯æŒ (i18n)

æœ¬é¡¹ç›®æä¾›äº†ä¸¤ç§å›½é™…åŒ–å®ç°æ–¹å¼ï¼š
1. Nextra å†…ç½®çš„æ–‡ä»¶å¤¹ç»“æ„å›½é™…åŒ–
2. è‡ªå®šä¹‰ i18n å®ç°ï¼Œç”¨äºç»„ä»¶å’Œå®¢æˆ·ç«¯å†…å®¹

## Nextra å†…ç½®çš„å›½é™…åŒ–æ”¯æŒ

Nextra é€šè¿‡æ–‡ä»¶å¤¹ç»“æ„æ¥æ”¯æŒå¤šè¯­è¨€å†…å®¹ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸åŒè¯­è¨€çš„æ–‡ä»¶å¤¹ï¼Œå¦‚ï¼š

<FileTree>
  <FileTree.Folder name="src" defaultOpen>
    <FileTree.Folder name="content" defaultOpen>
      <FileTree.Folder name="en" defaultOpen>
        <FileTree.File name="_meta.tsx" active />
        <FileTree.File name="index.mdx" />
        <FileTree.File name="introduction.mdx" />
      </FileTree.Folder>
      <FileTree.Folder name="zh" defaultOpen>
        <FileTree.File name="_meta.tsx" active />
        <FileTree.File name="index.mdx" />
        <FileTree.File name="introduction.mdx" />
      </FileTree.Folder>
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>

å¯ä»¥é€šè¿‡ `_meta.tsx` æ–‡ä»¶é…ç½®è¯­è¨€åˆ‡æ¢å™¨:

```tsx
import type { MetaRecord } from 'nextra'

export default {
  index: {
    type: 'page',
    display: 'hidden',
    theme: {
      timestamp: false,
      layout: 'full',
      toc: false,
    },
  },
  introduction: {
    type: 'page',
    theme: {
      navbar: true,
      toc: false,
    },
  },
} satisfies MetaRecord
```

## è‡ªå®šä¹‰ i18n å®ç°

å¯¹äºç»„ä»¶å’Œå®¢æˆ·ç«¯å†…å®¹ï¼Œæˆ‘ä»¬å®ç°äº†ç±»å‹å®‰å…¨çš„å›½é™…åŒ–è§£å†³æ–¹æ¡ˆã€‚

### ç›®å½•ç»“æ„

<FileTree>
  <FileTree.Folder name="src" defaultOpen>
    <FileTree.Folder name="i18n" defaultOpen>
      <FileTree.File name="index.ts" comment="æ ¸å¿ƒåŠŸèƒ½å’Œç±»å‹å®šä¹‰" />
      <FileTree.File name="en.ts" comment="è‹±æ–‡ json è¯­è¨€åŒ…" />
      <FileTree.File name="zh.ts" comment="ä¸­æ–‡ json è¯­è¨€åŒ…" />
    </FileTree.Folder>
    <FileTree.Folder name="hooks" defaultOpen>
      <FileTree.File name="useLocale.ts" comment="å°è£…å¥½çš„é€šç”¨ Hooks" />
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>

### è¯­è¨€æ–‡ä»¶ç¤ºä¾‹

è¯­è¨€æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼ˆä»¥ [`zh.ts`](https://github.com/pdsuwwz/nextjs-nextra-starter/blob/main/src/i18n/zh.ts) ä¸ºä¾‹ï¼‰ï¼š

```typescript
export default {
  systemTitle: 'ğŸš€ Nextra å¯åŠ¨æ¨¡æ¿',
  banner: {
    title: 'ğŸ‘‹ å˜¿ï¼Œæ¬¢è¿æ¥åˆ° Next.js èµ·æ­¥æ¨¡æ¿!',
    more: 'äº†è§£è¯¦æƒ…',
  },

  badgeTitle: 'è½»é‡çº§ã€å¼€ç®±å³ç”¨ ğŸ‰',
  featureSupport: `ğŸ”¥ ç°åœ¨æ”¯æŒ {{feature}}ï¼`,
  lastUpdated: 'æœ€åæ›´æ–°äº:',

  getStarted: 'å¼€å§‹ä½¿ç”¨',
  // ...
}
```

### ä½¿ç”¨æ–¹æ³•

#### 1. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```tsx
import { useLocale } from '@/hooks'

function MyComponent() {
  const { t, currentLocale } = useLocale()
  
  return (
    <div>
      <h1>{t('home.systemTitle')}</h1>
      
      {/* ä½¿ç”¨å˜é‡æ’å€¼ */}
      <div dangerouslySetInnerHTML={{
        __html: t('home.featureSupport', {
          feature: '<span>Tailwind CSS v4, Nextra v4</span>',
        }),
      }} />
    </div>
  )
}
```

#### 2. åŠ¨æ€åˆ‡æ¢è¯­è¨€

é€šè¿‡ URL è·¯å¾„åˆ‡æ¢è¯­è¨€ï¼ˆä¾‹å¦‚ [`/en/introduction`](/en/introduction) å’Œ [`/zh/introduction`](/zh/introduction)ï¼‰ã€‚å½“å‰è¯­è¨€ä¼šä» URL å‚æ•°ä¸­è‡ªåŠ¨è·å–ã€‚

## ç±»å‹å®‰å…¨

æˆ‘ä»¬çš„ i18n å®ç°æä¾›äº†å®Œæ•´çš„ç±»å‹å®‰å…¨æ”¯æŒï¼š

1. **è‡ªåŠ¨è¡¥å…¨ï¼š** ç¼–è¾‘å™¨ä¸­ä¼šè‡ªåŠ¨æç¤ºæ‰€æœ‰å¯ç”¨çš„ç¿»è¯‘é”®
2. **ç±»å‹æ£€æŸ¥ï¼š** ä½¿ç”¨é”™è¯¯çš„é”®ä¼šè§¦å‘ TypeScript é”™è¯¯
3. **åµŒå¥—é”®æ”¯æŒï¼š** æ”¯æŒå¦‚ `home.title` çš„ç‚¹è¡¨ç¤ºæ³•è®¿é—®
4. **å˜é‡æ’å€¼ï¼š** å¯ä»¥åœ¨ç¿»è¯‘ä¸­ä½¿ç”¨ `{{variable}}` è¯­æ³•

## é«˜çº§åŠŸèƒ½

### åµŒå¥—å€¼è·å–

`getNestedValue` å‡½æ•°å¯ä»¥æ ¹æ®ç‚¹è¡¨ç¤ºæ³•è·¯å¾„è·å–å¯¹è±¡ä¸­çš„åµŒå¥—å€¼ï¼š

```typescript
const value = getNestedValue(i18nConfig[currentLocale], 'home.title')
```

### å­—ç¬¦ä¸²æ’å€¼

`interpolateString` å‡½æ•°æ”¯æŒåœ¨ç¿»è¯‘å­—ç¬¦ä¸²ä¸­æ’å…¥å˜é‡ï¼š

```typescript
const result = interpolateString(
  'æ”¯æŒ {{feature}}', 
  { feature: 'Tailwind CSS v4' }
) // "æ”¯æŒ Tailwind CSS v4"
```

### è‡ªå®šä¹‰ Hooks

`useLocale` Hooks å°è£…äº†è¯­è¨€æ£€æµ‹å’Œç¿»è¯‘åŠŸèƒ½ï¼Œæä¾›ï¼š

- `currentLocale`: å½“å‰è¯­è¨€ä»£ç 
- `t`: ç¿»è¯‘å‡½æ•°ï¼Œæ”¯æŒå˜é‡æ’å€¼

## æœ€ä½³å®è·µ

1. **ç»„ç»‡ç¿»è¯‘æ–‡ä»¶ï¼š** ä½¿ç”¨åµŒå¥—å¯¹è±¡å°†ç›¸å…³ç¿»è¯‘åˆ†ç»„
2. **é¿å…ç¡¬ç¼–ç å­—ç¬¦ä¸²ï¼š** æ€»æ˜¯ä½¿ç”¨ `t()` å‡½æ•°è€Œä¸æ˜¯ç¡¬ç¼–ç æ–‡æœ¬
3. **è®¾ç½®é»˜è®¤è¯­è¨€ï¼š** ç¡®ä¿æœ‰é»˜è®¤è¯­è¨€å›é€€æœºåˆ¶
4. **ä¿æŒé”®çš„ä¸€è‡´æ€§ï¼š** æ‰€æœ‰è¯­è¨€æ–‡ä»¶ä¸­åº”åŒ…å«ç›¸åŒçš„é”®
5. **ä½¿ç”¨ TypeScriptï¼š** åˆ©ç”¨ç±»å‹ç³»ç»Ÿç¡®ä¿ç¿»è¯‘çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§

## å®æˆ˜ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ `SetupHero` ç»„ä»¶ä¸­ä½¿ç”¨ i18n çš„ç¤ºä¾‹ï¼š

```tsx
'use client'

import { useLocale } from '@/hooks'

export function SetupHero() {
  const { t, currentLocale } = useLocale()

  return (
    <div>
      <a href="https://github.com/pdsuwwz/nextjs-nextra-starter">
        {t('badgeTitle')}
      </a>
      
      <Link href={`/${currentLocale}/upgrade`}>
        <span dangerouslySetInnerHTML={{
          __html: t('featureSupport', {
            feature: `<span>Tailwind CSS v4, Nextra v4</span>`,
          }),
        }} />
      </Link>
      
      <Button asChild>
        <Link href={`/${currentLocale}/introduction`}>
          {t('getStarted')}
        </Link>
      </Button>
    </div>
  )
}
```

## è¿›ä¸€æ­¥æ‰©å±•

- **è¯­è¨€æ£€æµ‹ï¼š** æ·»åŠ åŸºäºæµè§ˆå™¨æˆ–ç”¨æˆ·åå¥½çš„è‡ªåŠ¨è¯­è¨€æ£€æµ‹
- **æ•°å­—å’Œæ—¥æœŸæ ¼å¼åŒ–ï¼š** é›†æˆ `Intl` API è¿›è¡Œæœ¬åœ°åŒ–æ ¼å¼åŒ–
- **å¤šå…ƒå¤æ•°ï¼š** æ·»åŠ å¯¹ä¸åŒè¯­è¨€å¤æ•°è§„åˆ™çš„æ”¯æŒ
- **ç¿»è¯‘ç®¡ç†ç•Œé¢ï¼š** ä¸ºå†…å®¹ç¼–è¾‘è€…åˆ›å»ºç¿»è¯‘ç®¡ç†å·¥å…·
